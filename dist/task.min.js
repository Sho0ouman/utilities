var Task=function(n,t){function o(){s||(c=performance.now(),i.run()),a=performance.now(),f=setInterval(v,r),s=!0}function e(){if(f)return clearInterval(f),performance.now()-a}var r,i,f,u,c,a,s,p,l,v;!function(o,f){s=!1,l=!1,i={run:function(){void 0!==i.stopAfter&&(i.id=setInterval(function(){performance.now()-c>=i.stopAfter&&(e(),p=!0,clearInterval(i.id))},1))},stop:function(){void 0!==id&&clearInterval(id)}},"number"==typeof t&&(r=f),"function"==typeof n&&(v=o)}(n,t),this.setHandler=function(n){void 0===v&&"function"==typeof n&&(v=n)},this.stopAfter=function(n){return void 0!==n&&"number"==typeof n&&(i.stopAfter=n),i.stopAfter},this.Every=function(n){return void 0!==n&&void 0===r&&"number"==typeof n&&(r=n),r},this.run=function(n){s||(n?u=setTimeout(function(){o()},n):o())},this.pause=function(){if(s&&!l&&!p)return l=!0,e()},this.continue=function(){s&&l&&!p&&(l=!1,o())},this.rollback=function(){u&&clearTimeout(u)},this.kill=function(){return p=!0,e(),performance.now()-c}};
